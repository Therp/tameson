<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data noupdate="0">
        <template id="portal_frontend_layout_tameson" inherit_id="portal.frontend_layout">
            <xpath expr="//ul[@id='top_menu']" position="before">
                <ul class="ml-4 nav navbar-nav">
                    <t t-foreach="website.menu_id.child_id" t-as="submenu">
                        <t t-call="website.submenu">
                            <t t-set="item_class" t-value="'nav-item'" />
                            <t t-set="link_class" t-value="'nav-link nav-tameson'" />
                        </t>
                    </t>
                </ul>
            </xpath>
            <xpath expr="//ul[@id='top_menu']/li[1]" position="before">
                <t t-call="tameson_website.language_selector" />
            </xpath>
        </template>
        <template id="layout_tameson" inherit_id="website.layout">
            <t t-foreach="website.menu_id.child_id" position="attributes">
                <attribute name="t-if">False</attribute>
            </t>
        </template>
        <template id="frontend_layout_tameson" inherit_id="web.frontend_layout">
            <xpath expr="//div[hasclass('o_footer_copyright')]" position="attributes">
                <attribute name="t-if">False</attribute>
            </xpath>
            <xpath expr="//t[@t-call='web.brand_promotion']" position="attributes">
                <attribute name="t-if">False</attribute>
            </xpath>
        </template>
        <template id="language_selector">
            <li class="nav-item js_language_selector" t-if="(request and request.is_frontend_multilang and len(languages) &gt; 1) or (website and (editable or translatable))">
                <div class="dropdown">
                    <a class="nav-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <span t-esc="list(filter(lambda lg : lg[0] == lang, languages))[0][2].split('/').pop()" />
                        <span class="caret ml4" />
                    </a>
                    <div class="dropdown-menu" role="menu">
                        <t t-foreach="languages" t-as="lg">
                            <a t-att-href="url_for(request.httprequest.path + '?' + keep_query(), lang_code=lg[0])" class="dropdown-item js_change_lang" t-att-data-url_code="lg[1]">
                                <t t-esc="lg[2].split('/').pop()" />
                            </a>
                        </t>
                    </div>
                </div>
            </li>
        </template>
        <template id="assets_frontend" inherit_id="website.assets_frontend" >
            <xpath expr="//link[last()]" position="after">
                <link rel="stylesheet" type="text/scss" href="/tameson_website/static/src/scss/tameson.scss" />
            </xpath>
        </template>
        <template id="portal_address" inherit_id="portal.portal_my_details" primary="True">
            <xpath expr="//form[@action='/my/account']" position="attributes">
                <attribute name="action"><t t-esc="form" /></attribute>
            </xpath>
        </template>
        <template id="login" inherit_id="auth_signup.login" >
            <xpath expr="//div[hasclass('small')]" position="attributes">
                <attribute name="t-if">False</attribute>
            </xpath>
            <xpath expr="//div[hasclass('small')]" position="after">
                <div class="mt-5 text-center">
                    <div class="my-2">
                        <strong style="font-size: 0.7rem !important;">Did you order before, but do not have an account?</strong> <br/>
                        <a class="btn btn-secondary btn-block" t-attf-href="/web/reset_password?{{ keep_query() }}" >
                            <strong>Activate account and password</strong>
                        </a><br/>
                    </div>

                    <div class="my-2">
                        <strong style="font-size: 0.8rem !important;">Would you like to create an account?</strong><br/>
                        <a class="btn btn-secondary btn-block" t-attf-href="/web/signup?{{ keep_query() }}">
                            <strong>Register a new account</strong>
                        </a><br/>
                    </div>
                    <div class="my-2">

                        <strong style="font-size: 0.8rem !important;">Did you lose your password?</strong><br/>
                        <a class="btn btn-secondary btn-block" t-attf-href="/web/reset_password?{{ keep_query() }}" >
                            <strong>Request a new password</strong>
                        </a><br/>
                    </div>
                </div>
            </xpath>            
        </template>
        <template id="portal_my_home_addresses" inherit_id="portal.portal_my_home" >
            <xpath expr="//div[hasclass('o_portal_docs')]" position="after">
                <br/>
                <h3>Accounts</h3>
                <div class="o_portal_docs list-group">
                    <t t-call="portal.portal_docs_entry">
                        <t t-set="title" t-value="'Main Account'" />
                        <t t-set="url" t-value="'/my/account'"/>
                    </t>
                    <t t-set="partner" t-value="user_id.partner_id" />
                    <t t-set="type_dict" t-value="{'contact': 'Contact', 'invoice': 'Invoice Address', 'delivery': 'Delivery Address', 'other': 'Other Address','private': 'Private Address'}" />
                    <t t-foreach="range(len(partner.child_ids))" t-as="child">
                        <t t-call="portal.portal_docs_entry">
                            <t t-set="title" t-value="'%s: %s' % (type_dict[partner.child_ids[child].type], partner.child_ids[child].name)" />
                            <t t-set="url" t-value="'/my/address/%d' % child"/>
                        </t>                            
                    </t>    
                </div>
            </xpath>
        </template>
    </data>
</odoo>